@model GiacenzaSorterRm.Pages.PagesRiepilogo.IndexModel

@{
    Layout = null;
}




<div class="col-xs-6 center">

    @if (!string.IsNullOrEmpty(Model.Message))
    {
        <div class="alert alert-danger" role="alert">
            @Model.Message
        </div>
    }

</div>

@if (Model.LstScatoleView.Count > 0)
{

    <h4 class="text-center">Riepilogo Scatole @Model.Fase</h4>
    <hr /><br />


          <form id="formRiepilogo" method="post" style="width:100%">

              @if ((User.IsInRole("ADMIN") || User.IsInRole("SUPERVISOR")))
              {
                  <!-- Hidden input non più necessario - gestito da JS nel parent -->
              }

              <table class="table table-striped table-bordered nowrap display compact " style="width:100%" id="tableProduzione" tabindex="-1">
                  <thead>
                      <tr>
                          <th scope="col" class='notexport'>
                              <!-- select all boxes -->
                              @if ((User.IsInRole("ADMIN") || User.IsInRole("SUPERVISOR")))
                              {
                                  <input type="checkbox" id="checkAll" class="checkAll" />
                              }

                          </th>
                          <th scope="col">
                              @Html.DisplayNameFor(model => model.LstScatoleView[0].Scatola)
                          </th>
                          <th scope="col">
                              @Html.DisplayNameFor(model => model.LstScatoleView[0].DataNormalizzazione)
                          </th>
                          <th scope="col">
                              @Html.DisplayNameFor(model => model.LstScatoleView[0].DataSorter)
                          </th>
                          <th scope="col">
                              @Html.DisplayNameFor(model => model.LstScatoleView[0].Note)
                          </th>
                          <th scope="col">
                              @Html.DisplayNameFor(model => model.LstScatoleView[0].Stato)
                          </th>
                          <th scope="col">
                              @Html.DisplayNameFor(model => model.LstScatoleView[0].Commessa)
                          </th>
                          <th scope="col">
                              @Html.DisplayNameFor(model => model.LstScatoleView[0].Contenitore)
                          </th>
                          <th scope="col">
                              @Html.DisplayNameFor(model => model.LstScatoleView[0].Tipologia)
                          </th>
                          <th scope="col">
                              @Html.DisplayNameFor(model => model.LstScatoleView[0].TipoProdotto)
                          </th>
                          <th scope="col">
                              @Html.DisplayNameFor(model => model.LstScatoleView[0].TotaleScatola)
                          </th>
                          <th scope="col">
                              @Html.DisplayNameFor(model => model.LstScatoleView[0].DataArrivoBancale)
                          </th>
                          <th scope="col">
                              @Html.DisplayNameFor(model => model.LstScatoleView[0].CentroNormalizzazione)
                          </th>
                          <th scope="col">
                              @Html.DisplayNameFor(model => model.LstScatoleView[0].CentroSorterizzazione)
                          </th>

                          <th scope="col" class='notexport'></th>

                      </tr>
                  </thead>
                  <tbody>
                      @foreach (var item in Model.LstScatoleView)
                      {
                      <tr>
                          <td>

                              @if ((User.IsInRole("ADMIN") || User.IsInRole("SUPERVISOR")))
                              {

                                  <input type="hidden" name="LstScatoleView.Index" value="@item.IdScatola" />
                                  <input type="hidden" name="LstScatoleView[@item.IdScatola].IdScatola" value="@item.IdScatola" />
                                  <input type="hidden" name="LstScatoleView[@item.IdScatola].Scatola" value="@item.Scatola" />

                                  <input name="LstScatoleView[@item.IdScatola].Elimina" type="checkbox" class="checkbox" value="true" />

                              }

                          </td>
                          <td>
                              @Html.DisplayFor(modelItem => item.Scatola)
                          </td>
                          <td>
                              @Html.DisplayFor(modelItem => item.DataNormalizzazione)
                          </td>

                          <td>
                              @Html.DisplayFor(modelItem => item.DataSorter)
                          </td>

                          <td>
                              @Html.DisplayFor(modelItem => item.Note)
                          </td>
                          <td>
                              @Html.DisplayFor(modelItem => item.Stato)
                          </td>
                          <td>
                              @Html.DisplayFor(modelItem => item.Commessa)
                          </td>
                          <td>
                              @Html.DisplayFor(modelItem => item.Contenitore)
                          </td>
                          <td>
                              @Html.DisplayFor(modelItem => item.Tipologia)
                          </td>
                          <td>
                              @Html.DisplayFor(modelItem => item.TipoProdotto)
                          </td>
                          <td>
                              @Html.DisplayFor(modelItem => item.TotaleScatola)
                          </td>
                          <td>
                              @Html.DisplayFor(modelItem => item.DataArrivoBancale)
                          </td>
                          <td>
                              @Html.DisplayFor(modelItem => item.CentroNormalizzazione)
                          </td>
                          <td>
                              @Html.DisplayFor(modelItem => item.CentroSorterizzazione)
                          </td>
                          <td>

                              @if (User.FindFirst("Azienda").Value == "POSTEL" && ((User.IsInRole("ADMIN") || (User.IsInRole("SUPERVISOR")))))
                              {
                                  <a asp-page="./Edit" asp-route-id="@item.IdScatola">Modifica</a>

                              }

                          </td>
                      </tr>
                      }
                  </tbody>
              </table>



              <input asp-for="EndDate" type="hidden" class="form-control" />
              <input asp-for="StartDate" type="hidden" class="form-control" />

          </form>
}

<script>
    // DataTables styling
    $(document).ready(function () {
        $('.dataTables_filter input[type="search"]').css(
            { 'width': '350px', 'display': 'inline-block' }
        );
    });
</script>




